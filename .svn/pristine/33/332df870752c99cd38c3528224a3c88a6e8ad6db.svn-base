<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="jakarta.tags.fmt" prefix="fmt" %>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec" %>
<%@ taglib uri="jakarta.tags.functions" prefix="fn" %>
<%@ taglib uri="jakarta.tags.core"  prefix="c"%>
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë‚˜ì˜ í”„ë¡œí•„</title>
<%-- <%@ include file="../../modules/headerPart.jsp" %> --%>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
<link rel="stylesheet" href="${pageContext.request.contextPath}/resources/plugins/fontawesome-free/css/all.min.css">
<link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/pages/my_profile.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script type="text/javascript">
	<c:if test="${not empty message }">
		Swal.fire({
				title : "${message }",
				icon : "success",
				draggable : true
			});
		<c:remove var="message" scope="request"/>
		<c:remove var="message" scope="session"/>
	</c:if>
	function sweetAlert(type, msg){
		Swal.fire({
			title : msg,
			icon : type,
			draggable : true
		});
	}
</script>
<style type="text/css">

/* ì „ì²´ í™”ë©´ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, ì•½ê°„ì˜ ì—¬ë°±ì„ ë‘” ì»¤ìŠ¤í…€ í¬ê¸° */
.modal-dialog.modal-fullscreen-custom {
	top:5vh;
    width: 80vw;
    max-width: none;
    height: 80vh;
    margin: auto;
    position: relative; /* ë‹«ê¸° ë²„íŠ¼ ê¸°ì¤€ì  */
}

/* ì™¸ë¶€ ë‹«ê¸° ë²„íŠ¼ */
.modal-dialog.modal-fullscreen-custom > .btn-close {
    position: absolute;
    top: -10px;
    right: -25px;
    z-index: 1070;
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 50%;
    padding: 0.5rem;
    filter: invert(1) grayscale(100%) brightness(200%);
}

.modal-dialog.modal-fullscreen-custom .modal-content {
    height: 100%;
    border: none;
    border-radius: 15px;
    overflow: hidden; /* ë‚´ë¶€ ì»¨í…ì¸ ê°€ ë‘¥ê·¼ ëª¨ì„œë¦¬ë¥¼ ë„˜ì§€ ì•Šë„ë¡ */
}

/* ì™¼ìª½ ë³¸ë¬¸ íŒ¨ë„ */
.post-pane {
    flex: 7; /* 6:4 ë¹„ìœ¨ë¡œ ê³µê°„ ë¶„ë°° */
    background-color: #ffffff;
    display: flex;
    flex-direction: column;
    height: 100%;
}
.post-pane-header, .post-pane-footer {
    flex-shrink: 0;
    padding: 1rem;
    display: flex;
    align-items: center;
}
.post-pane-header {
    /* Flexbox ì»¨í…Œì´ë„ˆë¡œ ì„¤ì • */
    display: flex;

    /* ìì‹ ìš”ì†Œë“¤ì„ ì–‘ìª½ ëìœ¼ë¡œ ë°€ì–´ëƒ„ (í•µì‹¬!) */
    justify-content: space-between;

    /* ìì‹ ìš”ì†Œë“¤ì˜ ì„¸ë¡œ ì •ë ¬ì„ ì¤‘ì•™ìœ¼ë¡œ ë§ì¶¤ */
    align-items: center;

    /* ê¸°ì¡´ì˜ íŒ¨ë”© ê°’ ë“±ì€ ìœ ì§€ */
    padding: 1rem;
    border-bottom: 1px solid #efefef;
}
.post-pane-footer {
    border-top: 1px solid #efefef;
}
.post-pane-body {
    flex-grow: 1;
    overflow-y: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #000;
}

/* ì˜¤ë¥¸ìª½ ëŒ“ê¸€ íŒ¨ë„ */
.comment-pane {
    flex: 3; /* 6:4 ë¹„ìœ¨ë¡œ ê³µê°„ ë¶„ë°° */
    background-color: #f7f7f7;
    border-left: 1px solid #e0e0e0;
    display: flex;
    flex-direction: column;
    height: 100%;
}
.comment-pane-header, .comment-pane-footer {
    flex-shrink: 0;
    padding: 1rem;
    background-color: #fff;
    display: flex;
    align-items: center;
}
.comment-pane-header {
    border-bottom: 1px solid #efefef;
}
.comment-pane-footer {
    border-top: 1px solid #efefef;
}
.comment-pane-body {
    flex-grow: 1;
    overflow-y: auto; /* ì´ ë¶€ë¶„ë§Œ ìŠ¤í¬ë¡¤ë¨ */
    padding: 1rem;
}

/* ê°œë³„ ëŒ“ê¸€ ì•„ì´í…œ ìŠ¤íƒ€ì¼ */
.comment-item {
    display: flex;
    align-items: flex-start; /* ì•„ì´ì½˜ì´ ê¸¸ì–´ì§ˆ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ìƒë‹¨ ì •ë ¬ */
    margin-bottom: 1.5rem;
}
.comment-item .comment-avatar {
    width: 32px;
    height: 32px;
    margin-right: 12px;
}
.comment-item img {
    width: 32px;
    height: 32px;
    margin-right: 12px;
}
/* [í•µì‹¬] ëŒ“ê¸€ ë‚´ìš©ê³¼ ë”ë³´ê¸° ì•„ì´ì½˜ì„ ì •ë ¬í•  ìƒˆë¡œìš´ flex ì»¨í…Œì´ë„ˆ */
.comment-item .comment-content {
    flex-grow: 1; /* ë‚¨ëŠ” ê³µê°„ì„ ëª¨ë‘ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • */
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}

.comment-item .comment-content p {
    margin-bottom: 0.25rem;
    color: #333;
}
/* ì¢‹ì•„ìš” ë²„íŠ¼ì˜ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.btn-like {
    /* ë¶€íŠ¸ìŠ¤íŠ¸ë© ë²„íŠ¼ì˜ ê¸°ë³¸ í…Œë‘ë¦¬, ë°°ê²½ ë“±ì„ ì—†ì• ê³  í…ìŠ¤íŠ¸ì²˜ëŸ¼ ë³´ì´ê²Œ í•¨ */
    background-color: transparent;
    border: none;
    color: #555; /* ê¸°ë³¸ ì•„ì´ì½˜ ë° í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
    font-size: 1rem;
    padding: 0.25rem 0.5rem;
    transition: color 0.2s ease-in-out; /* ìƒ‰ìƒ ë³€ê²½ ì‹œ ë¶€ë“œëŸ¬ìš´ íš¨ê³¼ */
}

.btn-like:hover {
    color: #000;
}

/* [í•µì‹¬] ë²„íŠ¼ì´ í´ë¦­ë˜ì–´ 'active' í´ë˜ìŠ¤ë¥¼ ê°€ì¡Œì„ ë•Œì˜ ìŠ¤íƒ€ì¼ */
.btn-like.active {
    /* í™œì„±í™” ìƒíƒœì¼ ë•Œ ì•„ì´ì½˜ê³¼ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
    color: #fd6083;
    font-weight: bold;
}

/* [í•µì‹¬] 'bi-heart-fill' ì•„ì´ì½˜ ìì²´ì˜ ìƒ‰ìƒë„ ì§€ì • */
.btn-like .bi-heart-fill {
    color: #fd6083;
}
.dropdown-menu{
	z-index:1100;
}
</style>
</head>

<body>

	<header class="site-header">
    <div class="logo">
      <a href="artist_community_main.html">DDTOWN SQUARE</a>
    </div>
    <nav class="utility-nav">
      <ul id="loggedOutNav">
        <li><a href="#" id="loginBtn" class="auth-link">ë¡œê·¸ì¸</a></li>
        <li><a href="signup.html" class="signup-link">íšŒì›ê°€ì…</a></li>
      </ul>
      <ul id="loggedInNav" style="display: none">
        <li><a href="#" id="notificationBtn" class="icon-btn" title="ì•Œë¦¼">ğŸ””</a></li>
        <li><a href="#" id="myPageBtn" class="icon-btn" title="ë§ˆì´í˜ì´ì§€">ğŸ‘¤</a></li>
        <li><a href="#" class="icon-btn" title="ì»¬ë ‰ì…˜">ğŸŒŸ</a></li>
        <li><a href="#" class="icon-btn special-icon" title="ìŠ¤í˜ì…œ">J</a></li>
        <li><a href="#" class="icon-btn" title="ë”ë³´ê¸°">ğŸ›ï¸</a></li>
        <li><a href="#" id="logoutBtn" class="auth-link">ë¡œê·¸ì•„ì›ƒ</a></li>
      </ul>
    </nav>
  </header>
  <nav class="main-navigation">
    <ul>
      <li><a href="#">êµ¿ì¦ˆìƒµ</a></li>
      <li>
        <a href="preference_vote.html">ì„ í˜¸ë„ ì¡°ì‚¬</a>
        <ul class="submenu">
          <li><a href="preference_vote.html" style="color: #8a2be2; font-weight:bold;">ì¸ê¸° íˆ¬í‘œ</a></li>
        </ul>
      </li>
    </ul>
  </nav>

  <main class="profile-main">
    <header class="profile-header">
      <div class="profile-header-inner">
        <div class="profile-avatar">
          <img src="${profileVO.comuProfileImg}" alt="í”„ë¡œí•„ ì´ë¯¸ì§€">
        </div>
        <div class="profile-nickname" id="profileNickname">${profileVO.comuNicknm}</div>
      </div>
    </header>
    <nav class="profile-tabs">
      <button class="tab active" data-tab="posts">í¬ìŠ¤íŠ¸</button>
      <button class="tab" data-tab="comments">ëŒ“ê¸€</button>
    </nav>
    <section class="profile-tab-content" id="postsTab" style="display:block;">
    	<c:choose>
    		<c:when test="${empty profileVO.postList}">
		      <div class="no-content">ì•„ì§ ì‘ì„±í•œ í¬ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
    		</c:when>
    		<c:otherwise>
    			<c:forEach items="${profileVO.postList}" var="post">
    				<div class="post-card">
			            <div class="post-header">
			                <span class="category">[ììœ ê²Œì‹œíŒ]</span>
			                <span class="post-date">2023.01.01</span>
			            </div>
			            <div class="post-media">
			                <img src="[ë‚´ ê¸€ì˜ ëŒ€í‘œ ì´ë¯¸ì§€ URL]" alt="ë‚´ê°€ ì“´ ê¸€ ì´ë¯¸ì§€" class="post-thumbnail">
			            </div>
			            <div class="post-content-area">
			                <h4 class="post-title">ë‚´ê°€ ì“´ ê¸€ì˜ ë©‹ì§„ ì œëª©ì…ë‹ˆë‹¤.</h4>
			                <p class="post-preview">ê¸€ ë‚´ìš©ì˜ ì¼ë¶€ë¥¼ ë¯¸ë¦¬ ë³´ì—¬ì¤ë‹ˆë‹¤. ë„ˆë¬´ ê¸¸ì§€ ì•Šê²Œ ì˜ë¼ì£¼ì„¸ìš”...</p>
			            </div>
			            <div class="post-meta-bottom">
			                <span class="post-likes">â¤ï¸ 123</span>
			                <span class="post-comments">ğŸ’¬ 45</span>
			                <span class="post-views">ğŸ‘€ 678</span>
			            </div>
			        </div>
    			</c:forEach>
    		</c:otherwise>
    	</c:choose>
    </section>
    <section class="profile-tab-content" id="commentsTab" style="display:none;">
    	<c:choose>
    		<c:when test="${empty profileVO.replyList}">
		      <div class="no-content">ì•„ì§ ì‘ì„±í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
    		</c:when>
    		<c:otherwise>
    			<c:forEach items="${profileVO.replyList}" var="reply">
    				<div class="comment-list-item">
			            <div class="comment-content mb-3 detailBox" style="cursor:pointer;" data-comu-post-no="${reply.comuPostNo}">
			            	<div class="d-flex align-items-center">
			                	<span>
				                   <img alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAgCAYAAAB3j6rJAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFwSURBVHgB7ZfLbYNAEIYHjMQBIbkEUkFIBcEduIS4AofHhRs3LjziCpIS3EFwBaGDUIKvSDwyI2HJWmMbAka2tN+BXcTM7L8DK/0AcO4U4dwDz/PmqqquBUEw8NaAYaR1XW9s2/6CPkJ839dkWf7GqQbjkuV5vnBdN4MuQqIo+m1EZNiRFY6paZp7+CdxHC+xI/FRzRe2nsgmhWH4xiQkQ0QQmL+lWlSTaldV9c7GnAjBhDWNGGwOFcCI2ZdluWrWeL0qBNHp4jjOFkZGkqS0mRrQQcjNuNThSYVc4m6ESH2Cj451FzLLsp46xj5oR/rssC/8Y2Xhp4aFnxoW/rGynBWCrmoOE9ImJKFLURQ6jEwQBMtmmsI1IegtdzTOZrPPMbtCfwWiKMbNGhv2+Yl5psUx8Aca30qWcYhbIwGKoui0sUPNttPX6uJRjIZibvI7gX51gU4tgy5CDpCjx0Ry3M8wjB1uLMFX8zGmIedMwh+5vYcq7uc6lQAAAABJRU5ErkJggg==" width="15px" height="15px">
			                	</span>
			                	${reply.comuPostContent}
			            	</div>
			                <hr/>
			                <p class="">
			                    ${reply.comuReplyContent}
			                </p>
			            </div>
			        </div>
    			</c:forEach>
    		</c:otherwise>
    	</c:choose>
    </section>
  </main>

  <div id="footer-placeholder"></div>
<div class="modal fade" id="postModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen-custom">
         <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>

        <div class="modal-content">
            <div class="modal-body p-0">
                <div class="d-flex h-100">

                    <div class="post-pane">
                        <div class="post-pane-header">
                        	<div class="d-flex align-items-center">
	                            <img id="postUserImg" src="" class="rounded-circle">
	                            <div class="ms-2">
	                                <strong class="d-block" id="postUserNm">ì–¼í°í•œì•„ì´ìŠ¤ì•„ë©”ë¦¬ì¹´ë…¸</strong>
	                                <small class="text-muted" id="postRegDate">06. 10. 16:32</small>
	                            </div>
                        	</div>
                        	<div class="dropdown">
						        <button class="btn btn-link text-secondary p-0" type="button" data-bs-toggle="dropdown" aria-expanded="false">
						            <i class="bi bi-three-dots-vertical"></i>
						        </button>
						        <ul class="dropdown-menu">
						            <li><a class="dropdown-item" href="#">ìˆ˜ì •</a></li>
						            <li><a class="dropdown-item" href="#">ì‚­ì œ</a></li>
						            <li><hr class="dropdown-divider"></li>
						            <li><a class="dropdown-item text-danger" href="#">ì‹ ê³ </a></li>
						        </ul>
						    </div>
                        </div>
                        <div class="post-pane-body" id="postContent">
                            <img src="https://i.imgur.com/qLuzqSW.png" class="img-fluid">
                        </div>
                        <div class="post-pane-footer">
						    <button type="button" class="btn btn-like" id="likeButton">
						        <i class="bi bi-heart"></i>
						        <span id="likeCount">33</span>
						    </button>
						</div>
                    </div>

                    <div class="comment-pane">
					    <div class="comment-pane-header">
					        <strong class="mx-auto">ë‹µê¸€ 3ê°œ</strong>
					    </div>

					    <div class="comment-pane-body">

					        <div class="comment-item">
					            <img src="https://via.placeholder.com/32" class="rounded-circle comment-avatar">

					            <div class="comment-content">
					                <div>
					                    <strong>whatsinmyplaylist</strong>
					                    <p>ì•±ì€ 7ì›” 7ì¼ì— ê¸°ì  ì˜¬ë¦°ë‹¤ëŠ”ë° ì›¹ ìŠ¤í† ì–´ëŠ” ëª‡ì¼ì— ì—´ë¦¬ë ¤ë‚˜ìš”? ìë™ê²°ì œ ë˜ê¸° ì „ì— ì˜¤í”ˆí–ˆìœ¼ë©´ ì¢‹ê² ëŠ”ë°....</p>
					                    <small class="text-muted">06. 10. 17:33</small>
					                </div>
					                <div class="dropdown">
								        <button class="btn btn-link text-secondary p-0" type="button" data-bs-toggle="dropdown" aria-expanded="false">
								            <i class="bi bi-three-dots-vertical"></i>
								        </button>
								        <ul class="dropdown-menu">
								            <li><a class="dropdown-item" href="#">ìˆ˜ì •</a></li>
								            <li><a class="dropdown-item" href="#">ì‚­ì œ</a></li>
								            <li><hr class="dropdown-divider"></li>
								            <li><a class="dropdown-item text-danger" href="#">ì‹ ê³ </a></li>
								        </ul>
								    </div>
					            </div>
					        </div>

					        <div class="comment-item">
					            <img src="https://via.placeholder.com/32" class="rounded-circle comment-avatar">
					            <div class="comment-content">
					                <div>
					                    <strong>í”Œ5ì¤‘í•˜ë‚˜ë§Œì–´ë–»ê²Œì„ ...</strong>
					                    <p>ì €ë„ ê²°ì œì¼ì´ 7ì›” 7ì¼ ì´ì „ì´ë¼..</p>
					                    <small class="text-muted">06. 10. 19:21</small>
					                </div>
					                <div class="dropdown">
								        <button class="btn btn-link text-secondary p-0" type="button" data-bs-toggle="dropdown" aria-expanded="false">
								            <i class="bi bi-three-dots-vertical"></i>
								        </button>
								        <ul class="dropdown-menu">
								            <li><a class="dropdown-item" href="#">ìˆ˜ì •</a></li>
								            <li><a class="dropdown-item" href="#">ì‚­ì œ</a></li>
								            <li><hr class="dropdown-divider"></li>
								            <li><a class="dropdown-item text-danger" href="#">ì‹ ê³ </a></li>
								        </ul>
								    </div>
					            </div>
					        </div>

					    </div>

					    <div class="comment-pane-footer">
						    <div class="input-group">
						        <textarea class="form-control" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”." aria-label="ëŒ“ê¸€ ì…ë ¥" rows="1" style="resize: none;"></textarea>
						        <button class="btn btn-primary" type="button" id="commentSubmitBtn">ë“±ë¡</button>
						    </div>
						</div>
					</div>

                </div>
            </div>
        </div>
    </div>
</div>
  <%@ include file="../../modules/footerPart.jsp" %>
</body>
<script type="text/javascript">
// íƒ­ ì „í™˜
document.querySelectorAll('.profile-tabs .tab').forEach(tab => {
  tab.addEventListener('click', function() {
    document.querySelectorAll('.profile-tabs .tab').forEach(t => t.classList.remove('active'));
    this.classList.add('active');
    document.getElementById('postsTab').style.display = this.dataset.tab === 'posts' ? 'block' : 'none';
    document.getElementById('commentsTab').style.display = this.dataset.tab === 'comments' ? 'block' : 'none';
  });
});


$(function(){
	const postModal = $("#postModal"); // í•´ë‹¹ í¬ìŠ¤íŠ¸ í˜¹ì€ ëŒ“ê¸€ì´ë‹¬ë¦° ì›ë³¸ê¸€ì„ ë³´ì—¬ì¤„ ëª¨ë‹¬
	const detailBox = $(".detailBox"); // ìì‹ ì´ ì“´ ê¸€ì´ë‚˜ ëŒ“ê¸€ div
	detailBox.on("click",function(){
		let comuPostNo = $(this).data("comuPostNo");


		$.ajax({
			url : "/api/community/getPost?comuPostNo="+comuPostNo,
			type : "get",
			success : function(res){
				console.log(res);
				let {writerProfile} = res;
				$("#postUserImg").attr("src",writerProfile.comuProfileImg);
				$("#postUserNm").html(writerProfile.comuNicknm);
				$("#postRegDate").html(getFormattedDate(res.comuPostRegDate));
				$("#postContent").html(res.comuPostContent);
				//$("#replyContentDiv") // ëŒ“ê¸€ ì˜ì—­
			},
			error : function(err){
				console.log(err);
			}
		})

		postModal.modal("show");
	})

	// idê°€ 'likeButton'ì¸ ìš”ì†Œë¥¼ í´ë¦­í–ˆì„ ë•Œ
    $('#likeButton').on('click', function() {

        // 1. í˜„ì¬ ë²„íŠ¼ì— 'active' í´ë˜ìŠ¤ë¥¼ í† ê¸€(ìˆìœ¼ë©´ ì—†ì• ê³ , ì—†ìœ¼ë©´ ì¶”ê°€)
        $(this).toggleClass('active');

        const likeIcon = $(this).find('i'); // ë²„íŠ¼ ì•ˆì˜ i íƒœê·¸(ì•„ì´ì½˜)ë¥¼ ì°¾ìŒ

        // 2. í˜„ì¬ 'active' í´ë˜ìŠ¤ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ì—¬ ì•„ì´ì½˜ ëª¨ì–‘ì„ ë³€ê²½
        if ($(this).hasClass('active')) {
            // "ì¢‹ì•„ìš”"ë¥¼ ëˆ„ë¥¸ ìƒíƒœ (í™œì„± ìƒíƒœ)
            likeIcon.removeClass('bi-heart').addClass('bi-heart-fill');
            // TODO: ì‹¤ì œë¡œëŠ” ì—¬ê¸°ì— ì¢‹ì•„ìš” ìˆ«ì 1 ì¦ê°€ì‹œí‚¤ëŠ” ë¡œì§ ì¶”ê°€
        } else {
            // "ì¢‹ì•„ìš”"ë¥¼ ì·¨ì†Œí•œ ìƒíƒœ (ë¹„í™œì„± ìƒíƒœ)
            likeIcon.removeClass('bi-heart-fill').addClass('bi-heart');
            // TODO: ì‹¤ì œë¡œëŠ” ì—¬ê¸°ì— ì¢‹ì•„ìš” ìˆ«ì 1 ê°ì†Œì‹œí‚¤ëŠ” ë¡œì§ ì¶”ê°€
        }

        // (ì‘ìš©) ì¢‹ì•„ìš” ìˆ«ì ë³€ê²½ ì˜ˆì‹œ
        const likeCountSpan = $('#likeCount');
        let currentCount = parseInt(likeCountSpan.text()); // í˜„ì¬ ìˆ«ì ê°€ì ¸ì˜¤ê¸°

        if ($(this).hasClass('active')) {
            likeCountSpan.text(currentCount + 1);
        } else {
            likeCountSpan.text(currentCount - 1);
        }

        // TODO: ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì´ ì‹œì ì— ì„œë²„ì™€ í†µì‹ (AJAX)í•˜ì—¬
        // "ì¢‹ì•„ìš”" ìƒíƒœë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.
    });

	// textareaì—ì„œ í‚¤ë³´ë“œë¥¼ ëˆ„ë¥¼ ë•Œë§ˆë‹¤ ì‹¤í–‰ ìë™ ë†’ì´ì¡°ì ˆ
    $('.comment-pane-footer textarea').on('keyup', function() {
        // ì¼ë‹¨ ë†’ì´ë¥¼ ì´ˆê¸°í™”í•˜ì—¬ ì¤„ì–´ë“œëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ê²Œ í•¨
        $(this).css('height', 'auto');
        // ìŠ¤í¬ë¡¤ ë†’ì´(ë‚´ìš© ì „ì²´ ë†’ì´)ë¥¼ ì‹¤ì œ ë†’ì´ë¡œ ì§€ì •
        $(this).css('height', $(this).prop('scrollHeight') + 'px');
    });

	// ì—”í„°í‚¤ ëŒ“ê¸€ ì „ì†¡
    $('.comment-pane-footer textarea').on('keydown', function(e) {
        // Shift í‚¤ë¥¼ ëˆ„ë¥´ì§€ ì•Šê³  Enter í‚¤ë§Œ ëˆŒë €ì„ ë•Œ
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault(); // ê¸°ë³¸ Enter ë™ì‘(ì¤„ë°”ê¿ˆ)ì„ ë§‰ìŒ
            $('#commentSubmitBtn').click(); // ë“±ë¡ ë²„íŠ¼ì„ ê°•ì œë¡œ í´ë¦­
        }
    });


	// ë‚ ì§œ í¬ë§·íŒ… í•¨ìˆ˜
	function padTwoDigits(num) {
	  return num.toString().padStart(2, "0");
	}

	function getFormattedDate(time) {
	  const date = new Date(time);

	  return (
	    [
	      date.getFullYear(),
	      padTwoDigits(date.getMonth() + 1),
	      padTwoDigits(date.getDate()),
	    ].join(".") +
	    " " +
	    [
	      padTwoDigits(date.getHours()),
	      padTwoDigits(date.getMinutes())
	    ].join(":")
	  );
	}
})
</script>
</html>